<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!-- Ground OVERLAY -->
    <script src="https://polyfill.io/v3/polyfill.min.js?features=default"></script>

    <!-- Moment JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.1/moment.min.js"></script>

    <!-- Moment Timezone -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment-timezone/0.5.33/moment-timezone-with-data.min.js"></script>

    <!-- JSZIP -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.5.0/jszip.min.js"></script>

    <!-- Firebase CORE -->
    <script src="https://www.gstatic.com/firebasejs/8.3.1/firebase-app.js"></script>

    <!-- Firebase Authentication -->
    <script src="https://www.gstatic.com/firebasejs/8.3.1/firebase-auth.js"></script>

    <!-- Firebase Firestore -->
    <script src="https://www.gstatic.com/firebasejs/8.3.1/firebase-firestore.js"></script>

    <!-- FONTAWESOME ICONS -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"
    />

    <!-- MATERIAL ICONS -->
    <link
      href="https://fonts.googleapis.com/css?family=Material+Icons|Material+Icons+Outlined|Material+Icons+Two+Tone|Material+Icons+Round|Material+Icons+Sharp"
      rel="stylesheet"
    />

    <!--  CUSTOM CSS -->
    <link rel="stylesheet" href="styles.css" />
    <link rel="shortcut icon" href="#" />
    <title>Oasys</title>
  </head>
  <body class="bg-gray-100 font-montserrat pt-16 flex flex-col">
    <script src="js/header.js"></script>

    <main class="min-h-screen space-y-4 py-12 mx-10">
      <!-- <div class="container m-auto rounded-shadow p-4 bg-light">
        <iframe
          id="mareanoMap"
          style="border: none"
          height="500px"
          width="100%"
          src="http://www.mareano.no/kart/viewer/#maps/5899"
        ></iframe>
      </div> -->

      <!-- Map-->
      <div class="container m-auto rounded-shadow p-4 bg-light">
        <div id="homeMap" class="big-card h-full"></div>
      </div>

      <!-- UPLOAD AND CREATE DEVICE BUTTONS -->
      <div class="container m-auto flex space-x-4">
        <button
          class="w-40 activeBtnStyle px-3 h-12 rounded-shadow flex justify-around items-center space-x-4 font-semibold text-sm cursor-pointer duration-200 border bg-light text-dark ring-2 ring-transparent hover:ring-gray-300"
        >
          ADD GLIDER
          <span class="material-icons-outlined"> add </span>
        </button>
        <button
          onclick="showModal()"
          class="w-44 activeBtnStyle px-3 h-12 space-x-4 rounded-shadow flex justify-around items-center font-semibold text-sm cursor-pointer duration-200 border bg-light text-dark ring-2 ring-transparent hover:ring-gray-300"
        >
          UPLOAD DATA
          <span class="material-icons-outlined"> file_upload </span>
        </button>
      </div>

      <!-- UPLOAD MODAL -->
      <div
        id="uploadModal"
        class="w-screen h-screen fixed top-0 left-0 z-10 bg-opacity-60 bg-gray-800 hidden"
      >
        <div
          id="uploadModalContent"
          class="max-w-xl w-full h-full max-h-96 m-auto fixed top-40 left-1/2 transform -translate-x-1/2 bg-gray-100 rounded-shadow flex flex-col justify-center items-center p-8 space-y-4"
        >
          <button
            id="closeModalBtn"
            onclick="hideModal()"
            class="absolute right-2 top-2 flex rounded-full hover:bg-gray-300 duration-200 p-1"
          >
            <span class="material-icons-outlined"> close </span>
          </button>
          <!-- DRAG & DROP -->
          <div
            id="dragDropBox"
            ondrop="dropHandler(event);"
            ondragover="dragOverHandler(event);"
            ondragleave="dragOverLeave(event)"
            class="w-full h-full border-dashed border-2 rounded-lg p-4 border-gray-300 flex flex-col justify-center items-center relative"
          >
            <!-- Cloud Box -->
            <div
              id="cloudBox"
              class="flex flex-col justfiy-center items-center pointer-events-none"
            >
              <span class="material-icons-outlined text-6xl text-gray-300">
                cloud_upload
              </span>
              <p class="font-medium">Drag zip-file to upload</p>
            </div>

            <!-- Selected Files -->
            <div id="selectedFiles" class="hidden w-full h-full flex flex-col">
              <h1 class="font-medium tracking-wide">Files to upload:</h1>
              <div
                id="uploadFileList"
                class="overflow-auto h-44 max-h-44 space-y-1 mt-2 text-sm"
              ></div>
            </div>
          </div>

          <!-- BUTTON ROW -->
          <div id="modalBtnRow" class="w-full h-10 flex">
            <!-- Select file button -->
            <button
              onclick="uploadData()"
              id="selectZipBtn"
              class="activeBtnStyle rounded-shadow w-52 px-2 flex justify-center items-center font-medium cursor-pointer duration-200 text-sm mr-32 bg-light text-dark hover:border-gray-800"
            >
              Select zip-file to upload
            </button>

            <!-- CONFIRM/CANCEL BUTTONS -->
            <button
              id="confirmBtn"
              onclick="uploadToFirebase()"
              class="activeBtnStyle rounded-shadow w-20 px-2 flex justify-center items-center font-medium cursor-pointer duration-200 bg-light border-gray-100 hover:border-gray-400 text-sm mr-3 disableBtn"
            >
              Confirm
            </button>
            <button
              id="cancelBtn"
              onclick="hideModal()"
              class="activeBtnStyle rounded-shadow w-20 px-2 flex justify-center items-center font-medium cursor-pointer duration-200 bg-light border-gray-100 hover:border-gray-400 text-sm"
            >
              Cancel
            </button>
          </div>
        </div>
      </div>

      <div
        id="uploadSuccess"
        class="h-14 w-56 bg-green-400 flex justify-center items-center rounded-shadow border-green-400 fixed right-10 bottom-20 font-medium z-10 pointer-events-none opacity-0 uploadSuccess"
      >
        Upload successful
      </div>

      <!--  GRID -->
      <div
        id="deviceGrid"
        class="container m-auto grid sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-12"
      >
        <!-- CARD -->
        <!-- <script>
          let deviceGrid = document.querySelector("#deviceGrid");

          for (let i = 0; i < 6; i++) {
            deviceGrid.innerHTML += `
            <a href="device.html?gliderUID=1234">
              <div
                class="overflow-hidden flex flex-col justify-between shadow-lg rounded-lg transform transition-all duration-200 hover:scale-95 hover:shadow-2xl"
              >
                <div
                class="absolute px-3 py-1 flex justify-center items-center bg-gray-800 top-4 left-4 rounded-lg font-semibold tracking-widest text-gray-200"
              >
                G1233
              </div>
              <img
                class="object-cover center w-full h-44 rounded-lg"
                src="assets/img/jelly.jpg"
                alt=""
              />

              <div class="flex-grow place-self-center mt-4">
                <h4 class="text-xl font-bold tracking-widest">ID: 123420</h4>
              </div>

              <div class="flex justify-evenly w-full p-4">
                <i
                  class="fas fa-battery-quarter text-xl transform -rotate-90 scale-y-125 flex items-center text-dark"
                ></i>
                <span class="material-icons text-2xl text-dark">
                  sd_card_alert
                </span>
                <span class="material-icons text-2xl text-dark">
                  check_circle
                </span>
                <span class="material-icons text-2xl text-dark"> error </span>
              </div>

              <div class="w-full bg-dark text-light p-2 flex flex-col rounded-lg">
                <p class="tracking-wide text-center text-base font-medium">
                  10 minutes ago
                </p>
              </div>
            </div>
          </a>
            
            `;
          }
        </script> -->
      </div>
    </main>

    <script src="js/footer.js"></script>
    <script src="js/firebase.js"></script>
    <script src="js/auth.js"></script>
    <script src="js/firestore.js"></script>
    <script src="js/home.js"></script>

    <!-- MAPS API with KEY -->
    <script src="js/map.js"></script>
    <script
      src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDmDtuW7lGEvkAUbXOEzuXfcCx3UChoFFc&callback=initHomeMap&libraries=&v=weekly"
      async
    ></script>
  </body>
</html>
