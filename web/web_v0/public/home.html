<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!-- Ground OVERLAY -->
    <script src="https://polyfill.io/v3/polyfill.min.js?features=default"></script>

    <!-- JSZIP -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.5.0/jszip.min.js"></script>

    <!-- Firebase CORE -->
    <script src="https://www.gstatic.com/firebasejs/8.3.1/firebase-app.js"></script>

    <!-- Firebase Authentication -->
    <script src="https://www.gstatic.com/firebasejs/8.3.1/firebase-auth.js"></script>

    <!-- Firebase Firestore -->
    <script src="https://www.gstatic.com/firebasejs/8.3.1/firebase-firestore.js"></script>

    <!-- FONTAWESOME ICONS -->
    <link
      rel="stylesheet"
      href="https://pro.fontawesome.com/releases/v5.10.0/css/all.css"
      integrity="sha384-AYmEC3Yw5cVb3ZcuHtOA93w35dYTsvhLPVnYs9eStHfGJvOvKxVfELGroGkvsg+p"
      crossorigin="anonymous"
    />

    <!-- MATERIAL ICONS -->
    <link
      href="https://fonts.googleapis.com/css?family=Material+Icons|Material+Icons+Outlined|Material+Icons+Two+Tone|Material+Icons+Round|Material+Icons+Sharp"
      rel="stylesheet"
    />

    <!--  CUSTOM CSS -->
    <link rel="stylesheet" href="styles.css" />
    <link rel="shortcut icon" href="#" />
    <title>Oasys</title>
  </head>
  <body class="bg-gray-100 font-montserrat pt-16 flex flex-col">
    <script src="js/header.js"></script>

    <main class="min-h-screen space-y-4 py-12 mx-10">
      <!-- <div class="container m-auto rounded-shadow p-4 bg-light">
        <iframe
          id="mareanoMap"
          style="border: none"
          height="500px"
          width="100%"
          src="http://www.mareano.no/kart/viewer/#maps/5899"
        ></iframe>
      </div> -->

      <!-- Map-->
      <div class="container m-auto rounded-shadow p-4 bg-light">
        <div id="homeMap" class="big-card h-full"></div>
      </div>

      <!-- UPLOAD AND CREATE DEVICE BUTTONS -->
      <div class="container m-auto flex space-x-4">
        <button
          class="activeBtnStyle rounded-shadow w-48 px-2 h-10 flex justify-center items-center font-medium tracking-wide cursor-pointer duration-200 border bg-light hover:border-gray-400"
        >
          Add new Glider
          <span class="material-icons-outlined ml-2"> add </span>
        </button>
        <button
          onclick="showModal()"
          class="activeBtnStyle rounded-shadow w-44 px-2 h-10 flex justify-center items-center font-medium tracking-wide cursor-pointer duration-200 border bg-light hover:border-gray-400"
        >
          Upload Data
          <span class="material-icons-outlined ml-2"> file_upload </span>
        </button>
      </div>

      <!-- UPLOAD MODAL -->
      <div
        id="uploadModal"
        class="w-screen h-screen fixed top-0 left-0 z-10 bg-opacity-60 bg-gray-800 hidden"
      >
        <div
          id="uploadModalContent"
          class="max-w-xl w-full h-full max-h-96 m-auto fixed top-40 left-1/2 transform -translate-x-1/2 bg-gray-100 rounded-shadow flex flex-col justify-center items-center p-8 space-y-4"
        >
          <button
            id="closeModalBtn"
            onclick="hideModal()"
            class="absolute right-2 top-2 flex rounded-full hover:bg-gray-300 duration-200 p-1"
          >
            <span class="material-icons-outlined"> close </span>
          </button>
          <!-- DRAG & DROP -->
          <div
            id="dragDropBox"
            ondrop="dropHandler(event);"
            ondragover="dragOverHandler(event);"
            ondragleave="dragOverLeave(event)"
            class="w-full h-full border-dashed border-2 rounded-lg p-4 border-gray-300 flex flex-col justify-center items-center relative"
          >
            <!-- Cloud Box -->
            <div
              id="cloudBox"
              class="flex flex-col justfiy-center items-center pointer-events-none"
            >
              <span class="material-icons-outlined text-6xl text-gray-300">
                cloud_upload
              </span>
              <p class="font-medium">Drag zip-file to upload</p>
            </div>

            <!-- Selected Files -->
            <div id="selectedFiles" class="hidden w-full h-full flex flex-col">
              <h1 class="font-medium tracking-wide">Files to upload:</h1>
              <div
                id="uploadFileList"
                class="overflow-auto h-44 max-h-44 space-y-1 mt-2 text-sm"
              ></div>
            </div>
          </div>

          <!-- BUTTON ROW -->
          <div id="modalBtnRow" class="w-full h-10 flex">
            <!-- Select file button -->
            <button
              onclick="uploadData()"
              id="selectZipBtn"
              class="activeBtnStyle rounded-shadow w-52 px-2 flex justify-center items-center font-medium cursor-pointer duration-200 text-sm mr-32 bg-light text-dark hover:border-gray-800"
            >
              Select zip-file to upload
            </button>

            <!-- CONFIRM/CANCEL BUTTONS -->
            <button
              id="confirmBtn"
              onclick="uploadToFirebase()"
              class="activeBtnStyle rounded-shadow w-20 px-2 flex justify-center items-center font-medium cursor-pointer duration-200 bg-light border-gray-100 hover:border-gray-400 text-sm mr-3 disableBtn"
            >
              Confirm
            </button>
            <button
              id="cancelBtn"
              onclick="hideModal()"
              class="activeBtnStyle rounded-shadow w-20 px-2 flex justify-center items-center font-medium cursor-pointer duration-200 bg-light border-gray-100 hover:border-gray-400 text-sm"
            >
              Cancel
            </button>
          </div>
        </div>
      </div>

      <div
        id="uploadSuccess"
        class="h-14 w-56 bg-green-400 flex justify-center items-center rounded-shadow border-green-400 fixed right-10 bottom-20 font-medium z-10 pointer-events-none opacity-0 uploadSuccess"
      >
        Upload successful
      </div>

      <!--  GRID -->
      <div
        id="deviceGrid"
        class="container m-auto grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 md: auto-cols-max gap-12"
      >
        <!-- CARD -->
        <!-- <a href="device.html?gliderUID=1234">
          <div class="card">
            <img
              class="object-cover center w-full h-44"
              src="assets/img/jelly.jpg"
              alt=""
            />
            <div class="id flex-grow place-self-center mt-4">
              <h4 class="text-2xl font-semibold tracking-wider">ID: 123420</h4>
            </div>

            <div class="indicator flex justify-evenly w-full my-2">
              <span class="material-icons text-3xl"> battery_full </span>
              <span class="material-icons text-3xl"> error </span>
            </div>
            <div class="w-full left-2 bg-gray-800 text-white p-2">
              <p class="tracking-wide text-center">Last sync: 20-03-04</p>
            </div>

            <div
              class="badge absolute px-3 py-1 flex justify-center items-center bg-gray-800 top-4 left-4 rounded-lg font-semibold tracking-widest text-gray-200"
            >
              G1233
            </div>
          </div>
        </a> -->
      </div>
    </main>

    <script src="js/footer.js"></script>
    <script src="js/firebase.js"></script>
    <script src="js/auth.js"></script>
    <script src="js/firestore.js"></script>
    <script src="js/home.js"></script>

    <!-- MAPS API with KEY -->
    <script src="js/map.js"></script>
    <script
      src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDmDtuW7lGEvkAUbXOEzuXfcCx3UChoFFc&callback=initHomeMap&libraries=&v=weekly"
      async
    ></script>
  </body>
</html>
