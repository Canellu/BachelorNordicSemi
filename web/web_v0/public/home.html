<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!-- Ground OVERLAY -->
    <script src="https://polyfill.io/v3/polyfill.min.js?features=default"></script>

    <!-- Moment JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.1/moment.min.js"></script>

    <!-- Moment Timezone -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment-timezone/0.5.33/moment-timezone-with-data.min.js"></script>

    <!-- JSZIP -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.5.0/jszip.min.js"></script>

    <!-- Firebase CORE -->
    <script src="https://www.gstatic.com/firebasejs/8.3.1/firebase-app.js"></script>

    <!-- Firebase Authentication -->
    <script src="https://www.gstatic.com/firebasejs/8.3.1/firebase-auth.js"></script>

    <!-- Firebase Firestore -->
    <script src="https://www.gstatic.com/firebasejs/8.3.1/firebase-firestore.js"></script>

    <!-- FONTAWESOME ICONS -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"
    />

    <!-- MATERIAL ICONS -->
    <link
      href="https://fonts.googleapis.com/css?family=Material+Icons|Material+Icons+Outlined|Material+Icons+Two+Tone|Material+Icons+Round|Material+Icons+Sharp"
      rel="stylesheet"
    />

    <!--  CUSTOM CSS -->
    <link rel="stylesheet" href="styles.css" />
    <link rel="shortcut icon" href="#" />
    <title>Oasys</title>
  </head>

  <body class="bg-gray-100 font-montserrat lg:pt-20">
    <script src="js/header.js"></script>

    <main class="min-h-screen space-y-4 sm:space-y-6 m-4">
      <!-- Map-->
      <div
        class="container m-auto rounded-shadow h-80 sm:h-screen p-2 sm:p-4 bg-light"
        style="max-height: 450px"
      >
        <div id="homeMap" class="big-card h-full"></div>
      </div>

      <!-- UPLOAD AND CREATE DEVICE BUTTONS -->
      <div
        class="container m-auto flex justify-around sm:justify-start sm:space-x-4"
      >
        <button
          class="h-9 sm:h-11 w-36 sm:w-40 bg-light rounded-shadow text-xs sm:text-sm font-semibold px-4 flex items-center duration-300 justify-between hover:bg-gray-800 hover:text-gray-50"
          style="white-space: nowrap"
        >
          ADD GLIDER
          <span class="material-icons text-xl sm:text-2xl"> add </span>
        </button>
        <button
          onclick="showModal()"
          class="h-9 sm:h-11 w-36 sm:w-44 bg-light rounded-shadow text-xs sm:text-sm font-semibold px-4 flex items-center duration-300 justify-between hover:bg-gray-800 hover:text-gray-50"
          style="white-space: nowrap"
        >
          UPLOAD DATA
          <span class="material-icons text-xl sm:text-2xl"> file_upload </span>
        </button>
      </div>

      <!-- UPLOAD MODAL -->
      <div
        id="uploadModal"
        class="hidden w-screen h-screen fixed top-0 left-0 z-10 bg-opacity-60 bg-gray-800"
      >
        <div
          id="uploadModalContent"
          class="max-w-xl w-full m-auto h-full max-h-96 fixed top-1/2 -translate-y-1/2 left-1/2 transform -translate-x-1/2 bg-gray-100 rounded-shadow flex flex-col justify-center items-center p-8 space-y-4"
        >
          <button
            id="closeModalBtn"
            onclick="hideModal()"
            class="absolute right-2 top-2 flex rounded-full hover:bg-gray-300 duration-200 p-1"
          >
            <span class="material-icons-outlined"> close </span>
          </button>
          <!-- DRAG & DROP -->
          <div
            id="dragDropBox"
            ondrop="dropHandler(event);"
            ondragover="dragOverHandler(event);"
            ondragleave="dragOverLeave(event)"
            class="w-full h-full border-dashed border-2 rounded-lg p-4 border-gray-300 flex flex-col justify-center items-center relative"
          >
            <!-- Cloud Box -->
            <div
              id="cloudBox"
              class="flex flex-col justfiy-center items-center pointer-events-none"
            >
              <span class="material-icons-outlined text-6xl text-gray-300">
                cloud_upload
              </span>
              <p class="font-medium">Drag zip-file to upload</p>
            </div>

            <!-- Selected Files -->
            <div id="selectedFiles" class="hidden w-full h-full flex flex-col">
              <h1 class="font-medium tracking-wide">Files to upload:</h1>
              <div
                id="uploadFileList"
                class="overflow-auto h-44 max-h-44 space-y-1 mt-2 text-sm"
              ></div>
            </div>
          </div>

          <!-- BUTTON ROW -->
          <div
            id="modalBtnRow"
            class="w-full flex flex-col sm:flex-row justfiy-center sm:justify-between items-center space-y-4 sm:space-y-0 h-24 sm:h-10"
          >
            <!-- Select file button -->
            <button
              onclick="uploadData()"
              id="selectZipBtn"
              class="h-9 sm:h-10 w-44 sm:w-52 bg-light rounded-shadow text-xs sm:text-sm font-medium px-4 flex items-center duration-300 justify-center hover:bg-gray-800 hover:text-gray-50"
            >
              Select zip-file to upload
            </button>

            <!-- CONFIRM/CANCEL BUTTONS -->
            <div
              class="flex w-44 sm:w-52 justify-between sm:justify-between h-9 sm:h-10"
            >
              <button
                id="confirmBtn"
                onclick="uploadToFirebase()"
                class="rounded-shadow w-20 sm:w-24 px-2 sm:px-4 flex justify-center items-center font-medium cursor-pointer duration-300 bg-light hover:bg-gray-800 hover:text-gray-50 text-xs sm:text-sm disableBtn"
              >
                Confirm
              </button>
              <button
                id="cancelBtn"
                onclick="hideModal()"
                class="rounded-shadow w-20 px-2 sm:w-24 sm:px-4 flex justify-center items-center font-medium cursor-pointer duration-300 bg-light hover:bg-gray-800 hover:text-gray-50 text-xs sm:text-sm"
              >
                Cancel
              </button>
            </div>
          </div>
        </div>
      </div>

      <div
        id="uploadSuccess"
        class="h-14 w-56 bg-green-400 flex justify-center items-center rounded-shadow border-green-400 fixed right-10 bottom-20 font-medium z-10 pointer-events-none opacity-0 uploadSuccess"
      >
        Upload successful
      </div>

      <!--  GRID -->
      <div
        id="deviceGrid"
        class="container m-auto grid sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 sm:gap-6"
      >
        <!-- CARD -->
        <!-- <script>
          let deviceGrid = document.querySelector("#deviceGrid");

          for (let i = 0; i < 4; i++) {
            deviceGrid.innerHTML += `
            <a href="device.html?gliderUID=1234">
          <div
            class="overflow-hidden bg-light flex flex-col justify-between rounded-xl shadow-xl transform transition-all duration-200 hover:scale-95 hover:shadow-2xl w-full"
          >
            <div
              class="absolute px-3 py-1 flex justify-center items-center bg-gray-800 top-4 left-4 rounded-lg font-semibold tracking-widest text-gray-200 text-sm sm:text-base"
            >
              G1233
            </div>

            <div
              class="absolute top-1/4 sm:hidden flex-grow place-self-center border border-gray-50 py-1 px-3 rounded-3xl"
            >
              <h4 class="text-xl text-light font-semibold tracking-widest">
                ID: 123420
              </h4>
            </div>

            <img
              class="object-cover w-full h-28 sm:h-44 rounded-b-xl"
              src="assets/img/jelly.jpg"
              alt=""
            />

            <div class="hidden sm:block flex-grow place-self-center mt-4">
              <h4
                class="text-md sm:text-xl font-bold tracking-wider sm:tracking-widest"
              >
                ID: 123420
              </h4>
            </div>

            <div class="flex justify-evenly w-full p-2">
              <i
                class="fas fa-battery-quarter text-sm sm:text-lg transform -rotate-90 scale-y-125 flex items-center text-dark"
              ></i>
              <span class="material-icons text-xl sm:text-2xl text-dark">
                sd_card_alert
              </span>
              <span class="material-icons text-xl sm:text-2xl text-dark">
                check_circle
              </span>
              <span class="material-icons text-xl sm:text-2xl text-dark">
                error
              </span>
            </div>

            <div
              class="w-full text-dark bg-gray-50 sm:bg-gray-800 sm:text-gray-50 p-2 flex flex-col rounded-t-lg"
            >
              <p
                class="tracking-wide text-center text-sm sm:text-base font-medium"
              >
                10 minutes ago
              </p>
            </div>
          </div>
        </a>
            
            `;
          }
        </script> -->
      </div>

      <!-- Back to top -->
      <div
        class="fixed bottom-5 right-8 h-12 w-12 bg-dark rounded-full flex items-center justify-center border-2 text-light"
        onclick="scrollToTop()"
      >
        <span class="material-icons text-4xl"> expand_less </span>
      </div>
    </main>

    <script src="js/footer.js"></script>
    <script src="js/firebase.js"></script>
    <script src="js/auth.js"></script>
    <script src="js/firestore.js"></script>
    <script src="js/home.js"></script>

    <script src="js/map.js"></script>
    <script
      src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBZdOYcDNzgN42ME1STKLgJpyWucvOatYg&callback=initHomeMap&libraries=&v=weekly"
      async
    ></script>
  </body>
</html>
